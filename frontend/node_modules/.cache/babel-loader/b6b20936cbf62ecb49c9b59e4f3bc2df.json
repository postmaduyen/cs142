{"ast":null,"code":"var _jsxFileName = \"E:\\\\Clone github\\\\project6_photoSharing\\\\frontend\\\\src\\\\components\\\\UserPhotos\\\\index.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Typography, Button, TextField } from \"@mui/material\";\nimport { useParams } from \"react-router-dom\";\nimport fetchModel from \"../../lib/fetchModelData\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nfunction UserPhotos(props) {\n  const user = props.user;\n  const {\n    userId\n  } = useParams();\n  const [photos, setPhotos] = useState([]);\n  const [newComment, setNewComment] = useState(\"\");\n  const [currentPhotoId, setCurrentPhotoId] = useState(null);\n  const uploadInputRef = useRef(null);\n  const fetchUserPhotos = async () => {\n    try {\n      const data = await fetchModel(`photo/${userId}`);\n      setPhotos(data);\n    } catch (error) {\n      console.error(\"Error fetching user photos:\", error);\n    }\n  };\n  const handleAddPhoto = async () => {\n    if (uploadInputRef.current && uploadInputRef.current.files.length > 0) {\n      const formData = new FormData();\n      formData.append(\"uploadedphoto\", uploadInputRef.current.files[0]);\n      try {\n        await axios.post(`http://localhost:8081/api/photo/new/${user._id}`, formData);\n        // Wait for the photo to be successfully uploaded, then fetch the user photos again.\n        fetchUserPhotos();\n      } catch (err) {\n        console.error(\"POST ERR:\", err);\n      }\n    }\n  };\n  con;\n  const handleAddComment = async photoId => {\n    if (newComment.trim() !== \"\") {\n      try {\n        await axios.post(`http://localhost:8081/api/comment/${photoId}`, {\n          comment: newComment,\n          user: props.user\n        });\n        setNewComment(\"\");\n        fetchUserPhotos();\n      } catch (err) {\n        console.error(\"Error adding comment:\", err);\n      }\n    }\n  };\n  useEffect(() => {\n    fetchUserPhotos();\n  }, [userId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-photos-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"User Photos for User ID: \", userId), props.user._id === userId && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    ref: uploadInputRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleAddPhoto,\n    style: {\n      marginBottom: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Add Photo\")), photos.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, \"No photos found for this user.\") : photos.map(photo => /*#__PURE__*/React.createElement(\"div\", {\n    key: photo._id,\n    className: \"photo-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `http://localhost:8081/api/photo/images/${photo.file_name}`,\n    alt: `Photo by user ${userId}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"photo-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, \"Time: \", photo.date_time), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, \"Comments\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, photo.comments.map(comment => /*#__PURE__*/React.createElement(\"div\", {\n    key: comment._id,\n    className: \"comment-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, comment.user_name, \": \", comment.comment), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"Time: \", comment.date_time)))), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Add a comment\",\n    variant: \"outlined\",\n    fullWidth: true,\n    value: newComment,\n    onChange: e => {\n      setNewComment(e.target.value);\n      setCurrentPhotoId(photo._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => handleAddComment(photo._id),\n    style: {\n      marginTop: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, \"Add Comment\")))));\n}\nexport default UserPhotos;","map":{"version":3,"names":["React","useState","useEffect","useRef","Typography","Button","TextField","useParams","fetchModel","axios","UserPhotos","props","user","userId","photos","setPhotos","newComment","setNewComment","currentPhotoId","setCurrentPhotoId","uploadInputRef","fetchUserPhotos","data","error","console","handleAddPhoto","current","files","length","formData","FormData","append","post","_id","err","con","handleAddComment","photoId","trim","comment","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","variant","type","accept","ref","color","onClick","style","marginBottom","map","photo","key","src","file_name","alt","date_time","comments","user_name","label","fullWidth","value","onChange","e","target","marginTop"],"sources":["E:/Clone github/project6_photoSharing/frontend/src/components/UserPhotos/index.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Typography, Button, TextField } from \"@mui/material\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport fetchModel from \"../../lib/fetchModelData\";\r\nimport axios from \"axios\";\r\nimport \"./styles.css\";\r\n\r\nfunction UserPhotos(props) {\r\n  const user = props.user;\r\n  const { userId } = useParams();\r\n  const [photos, setPhotos] = useState([]);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [currentPhotoId, setCurrentPhotoId] = useState(null);\r\n  const uploadInputRef = useRef(null);\r\n\r\n  const fetchUserPhotos = async () => {\r\n    try {\r\n      const data = await fetchModel(`photo/${userId}`);\r\n      setPhotos(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching user photos:\", error);\r\n    }\r\n  };\r\n\r\n  const handleAddPhoto = async () => {\r\n    if (uploadInputRef.current && uploadInputRef.current.files.length > 0) {\r\n      const formData = new FormData();\r\n      formData.append(\"uploadedphoto\", uploadInputRef.current.files[0]);\r\n      try {\r\n        await axios.post(\r\n          `http://localhost:8081/api/photo/new/${user._id}`,\r\n          formData\r\n        );\r\n        // Wait for the photo to be successfully uploaded, then fetch the user photos again.\r\n        fetchUserPhotos();\r\n      } catch (err) {\r\n        console.error(\"POST ERR:\", err);\r\n      }\r\n    }\r\n  };\r\n  con\r\n\r\n  const handleAddComment = async (photoId) => {\r\n    if (newComment.trim() !== \"\") {\r\n      try {\r\n        await axios.post(`http://localhost:8081/api/comment/${photoId}`, {\r\n          comment: newComment,\r\n          user: props.user,\r\n        });\r\n        setNewComment(\"\");\r\n        fetchUserPhotos();\r\n      } catch (err) {\r\n        console.error(\"Error adding comment:\", err);\r\n      }\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    fetchUserPhotos();\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div className=\"user-photos-container\">\r\n      <Typography variant=\"body1\">User Photos for User ID: {userId}</Typography>\r\n      {props.user._id === userId && (\r\n        <div>\r\n          <input type=\"file\" accept=\"image/*\" ref={uploadInputRef} />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleAddPhoto}\r\n            style={{ marginBottom: \"20px\" }}\r\n          >\r\n            Add Photo\r\n          </Button>\r\n        </div>\r\n      )}\r\n      {photos.length === 0 ? (\r\n        <div>No photos found for this user.</div>\r\n      ) : (\r\n        photos.map((photo) => (\r\n          <div key={photo._id} className=\"photo-container\">\r\n            <img\r\n              src={`http://localhost:8081/api/photo/images/${photo.file_name}`}\r\n              alt={`Photo by user ${userId}`}\r\n            />\r\n            <div className=\"photo-details\">\r\n              <Typography variant=\"body2\">Time: {photo.date_time}</Typography>\r\n              <Typography variant=\"h6\">Comments</Typography>\r\n              <div className=\"comments-section\">\r\n                {photo.comments.map((comment) => (\r\n                  <div key={comment._id} className=\"comment-item\">\r\n                    <Typography variant=\"body2\">\r\n                      {comment.user_name}: {comment.comment}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      Time: {comment.date_time}\r\n                    </Typography>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <TextField\r\n                label=\"Add a comment\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={newComment}\r\n                onChange={(e) => {\r\n                  setNewComment(e.target.value);\r\n                  setCurrentPhotoId(photo._id);\r\n                }}\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => handleAddComment(photo._id)}\r\n                style={{ marginTop: \"10px\" }}\r\n              >\r\n                Add Comment\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserPhotos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}